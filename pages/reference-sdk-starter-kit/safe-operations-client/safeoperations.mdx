import { Tabs } from "nextra/components";

# `safeOperations`

This extension method enables extending the SafeClient with the ability to use a bundler and a paymaster, and to perform [EIP-4337](https://eips.ethereum.org/EIPS/eip-4337) User Operations.

## Usage

{/* <!-- vale off --> */}

<Tabs items={["send-safe-operation.ts", "setup.ts"]}>
  <Tabs.Tab>
  ```typescript 
      import { safeOperations } from '@safe-global/sdk-starter-kit'

      const transactions = [{
        to: '0x...',
        value: '0',
        data '0x...',
      }, {
        to: '0x...',
        value: '0',
        data '0x...',
      }]    
    
      const safeOperationsClient = await safeClient.extend(
        safeOperations({ bundlerUrl }, { isSponsored, paymasterUrl })
      )

      const safeOperationResult = await safeClientWithSafeOperation.sendSafeOperation({
        transactions,
        validAfter: Number(timestamp - 60_000n),
        validUntil: Number(timestamp + 60_000n)
      })
  ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```typescript 
    import { createSafeClient } from '@safe-global/sdk-starter-kit'

    const safeClient = await createSafeClient({
      provider,
      signer,
      safeAddress
    })
  ```
  </Tabs.Tab>
</Tabs>

{/* <!-- vale on --> */}

## Returns

`Promise<SafeClient & & { sendSafeOperation, confirmSafeOperation, getPendingSafeOperation }>`

A SafeClient instance with several methods enabling the creations and execution of User Operations by using a Safe account (Safe Operations).

## Parameters

### `bundlerUrl`

- **Type:** `string`

The URL of the bundler in the chosen provider to bundle User Operations (for example, Pimlico, Alchemy).

### `isSponsored` (optional)

- **Type:** `boolean`

If the User Operation is sponsored or not.

### `paymasterUrl`

- **Type:** `string`

The URL of the paymaster in the chosen provider to pay for the User Operations.

### `sponsorshipPolicyId`

- **Type:** `string` (optional)

The sponsorship policy id to be used in the User Operation. You can create one and get it from the chosen paymaster provider.

### `paymasterAddress`

- **Type:** `string` (optional)

The address of the paymaster contract in the chosen provider.

### `paymasterTokenAddress`

- **Type:** `string` (optional)

The address of the token to be used to pay for the User Operations in the `paymasterAddress`.

### `amountToApprove` (optional)

- **Type:** `bigint`

The amount of tokens to approve to the paymaster contract to pay for the User Operations.