import { Tabs } from "nextra/components";

# `confirmOffChainMessage`

The `confirmOffChainMessage` method is used to confirm an off-chain message that was added to the Transaction Service. This method is only used if the Safe account is a multisig account (with more than one owner and a threshold greater than 1).

Until the threshold is reached, the message is not yet valid. This method is intended to be used in conjunction with the `sendOffChainMessage()` method. When sending a message that is stored in our Safe services (Transaction Service), you should `confirmOffChainMessage()` with other owners to make it valid.

## Usage

{/* <!-- vale off --> */}

<Tabs items={["send.ts", "setup.ts"]}>
  <Tabs.Tab>
  ```typescript 
    import { safeOperations } from '@safe-global/sdk-starter-kit'
    
    const safeOperationsClient = await safeClient.extend(
      safeOperations({ bundlerUrl }, { isSponsored, paymasterUrl })
    )

    const messageResult = await safeMessageClient.confirmOffChainMessage({ 
      messageHash
    })
  ```
  </Tabs.Tab>
  <Tabs.Tab>
  ```typescript 
    import { createSafeClient } from '@safe-global/sdk-starter-kit'

    const safeClient = await createSafeClient({
      provider,  
      signer,
      safeAddress
    })
  ```
</Tabs.Tab>
</Tabs>

{/* <!-- vale on --> */}

## Returns

`SafeClientResult`

An object with the result of the confirmation operation.

## Parameters

### `messageHash`

- **Type:** `string`

The Safe message hash. You can obtain this hash once you use the `sendOffChainMessage` method.

To obtain the message hash, an application that aims to confirm off-chain messages can use the `getPendingOffChainMessage()` method to retrieve the messages that are still not valid (lacking signatures) and their corresponding message hashes.

```typescript
const messageHashToSearch = '0x...'
const pendingMessages = await safeMessageClient.getPendingOffChainMessages()

for (const message of pendingMessages.results) {
  if (message.messageHash !== messageHashToSearch) {
    return
  }

  const txResult = await safeMessageClient.confirmOffChainMessage({
    messageHash: message.messageHash
  })
}
````
