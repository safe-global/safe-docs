import { Tabs } from 'nextra/components'

# `useConfirmTransaction`

Confirms a pending multi-signature transaction shared via the Safe Transaction Service.

- If the number of signatures collected in the Safe Transaction Service for a given Safe transaction hash hasn't met the `threshold`, it adds the signature from the connected signer.
- If the number of collected signatures reaches the `threshold`, it executes the Safe transaction.

## Usage

{/* <!-- vale off --> */}

<Tabs items={['App.tsx', 'main.tsx']}>
  <Tabs.Tab>
    ```typescript
    import { useConfirmTransaction } from '@safe-global/safe-react-hooks'
    
    function App() {
      const {
        confirmTransaction,
        data,
        // ...
      } = useConfirmTransaction()

      const safeTxHash = '0x...'

      return (
        <>
          <button onClick={() => confirmTransaction({ safeTxHash })}>
            Confirm Transaction
          </button>
          {data && JSON.stringify(data)}
        </>
      )
    }

    export default App
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```typescript
    import ReactDOM from 'react-dom/client'
    import { createConfig, SafeProvider } from '@safe-global/safe-react-hooks'
    import { sepolia } from 'viem/chains'
    import App from './App.tsx'

    const config = createConfig({
      chain: sepolia,
      provider,
      signer,
      safeOptions: {
        owners: ['0x...', '0x...', '0x...'],
        threshold: 2
      }
    })

    const root = document.getElementById('root')
    
    ReactDOM.createRoot(root).render(
      <SafeProvider config={config}>
        <App />
      </SafeProvider>
    )
    ```
  </Tabs.Tab>
</Tabs>

{/* <!-- vale on --> */}

## Parameters

`UseConfirmTransactionParams`

Parameters to customize the hook behavior.

```typescript
import { UseConfirmTransactionParams } from '@safe-global/safe-react-hooks'
```

### `config` (Optional)

- **Type**: `SafeConfigWithSigner`

The configuration used instead of the one from the nearest [`SafeProvider`](./safeprovider.mdx).

{/* <!-- vale off --> */}

<Tabs items={['index.tsx', 'config.ts']}>
  <Tabs.Tab>
    ```typescript
    import config from './index.ts'

    const result = useConfirmTransaction({
      config
    })
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```typescript
    import { createConfig } from '@safe-global/safe-react-hooks'
    import { sepolia } from 'viem/chains'

    const config = createConfig({
      chain: sepolia,
      provider,
      signer,
      safeOptions: {
        owners: ['0x...', '0x...', '0x...'],
        threshold: 2
      }
    })
    ```
  </Tabs.Tab>
</Tabs>

{/* <!-- vale on --> */}

## Returns 

`UseConfirmTransactionReturnType`

The react-query [`UseMutationResult`](https://tanstack.com/query/v4/docs/framework/react/reference/useMutation).

```typescript
import { UseConfirmTransactionReturnType } from '@safe-global/safe-react-hooks'
```









### `confirmTransaction`

`UseMutateFunction<SafeClientResult, Error, ConfirmTransactionVariables, unknown>`

Function to send the transaction. It's a react-query [`mutate`](https://tanstack.com/query/v4/docs/framework/react/reference/useMutation) function

#### Parameters

- `ConfirmTransactionVariables`: Variables to send the transactions.
  - `safeTxHash` (string): The safe transaction hash to confirm.

#### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the transaction result.








### `confirmTransactionAsync`

`UseMutateAsyncFunction<SafeClientResult, Error, ConfirmTransactionVariables, unknown>`

Asynchronous function to send the transaction. It's a react-query [`mutateAsync`](https://tanstack.com/query/v4/docs/framework/react/reference/useMutation) function

#### Parameters

- `ConfirmTransactionVariables`: Variables to send the transactions.
  - `safeTxHash` (string): The safe transaction hash to confirm.

#### Returns

In the `data` property of the react-query mutation result, we will have a [`SafeClientResult`](https://github.com/safe-global/safe-core-sdk/blob/9fca59736c418dc6253404b4a7784e2245d83312/packages/sdk-starter-kit/src/types.ts#L67-L85) object containing the transaction result.











## Caveats

The `confirmTransaction` and `confirmTransactionAsync` methods are used to confirm a transaction proposed to the Transaction Service. These methods are only applicable for multisig Safe accounts (with more than one owner and a threshold greater than 1).

These methods should be used in conjunction with the `useSendTransaction` hook mutation methods. When a transaction is stored in the Transaction Service, you should confirm it with other owners to make it valid.

It's important to note that when you confirm the transaction, if the required number of signatures reaches the threshold stored in the Transaction Service, the transaction is automatically sent to the blockchain for execution and confirmation. This is something that already happens with the `useSendTransaction` methods when the threshold is 1.
