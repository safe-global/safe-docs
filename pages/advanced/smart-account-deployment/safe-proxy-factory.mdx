# Deploying Smart Accounts

To save deployment gas costs, users will deploy a `SafeProxy` contract instead of deploying the complete bytecode of Smart Account and associated contracts. The `SafeProxy` delegates all calls to a singleton contract, whose address is stored at `slot(0)` of the proxy contract. This means that the proxy contract itself is lightweight and inexpensive to deploy, while the actual logic is handled by the singleton contract.

The `SafeProxyFactory` contract is used to deploy `SafeProxy` contracts. The `SafeProxyFactory` contract provides various functions to deploy a `SafeProxy` contract which are given below.
The address of the proxy depends on the address of the `SafeProxyFactory` contract, `intializer` data, and the salt used to deploy the proxy.

## Functions available to deploy a `SafeProxy` contract

The address of the proxy depends on the address of the `SafeProxyFactory` contract, `intializer` data, and the salt used to deploy the proxy.

### `createProxyWithNonce`

```solidity
function createProxyWithNonce(address _singleton, bytes memory initializer, uint256 saltNonce) public returns (SafeProxy proxy);
```
Deploys a new proxy with the given singleton and nonce. Optionally executes a call to the new proxy. Emits `ProxyCreation` event on successful proxy creation.

### `createChainSpecificProxyWithNonce`

```solidity
function createChainSpecificProxyWithNonce(address _singleton, bytes memory initializer, uint256 saltNonce) public returns (SafeProxy proxy);
```
Deploys a chain-specific proxy with `_singleton` and `saltNonce`, ensuring it cannot be replayed on other networks. Emits `ProxyCreation` event on successful proxy creation.

### `createProxyWithCallback`

```solidity
function createProxyWithCallback(address _singleton, bytes memory initializer, uint256 saltNonce, IProxyCreationCallback callback) public returns (SafeProxy proxy);
```
Deploys a new proxy, executes an optional call to the proxy, and invokes a specified callback. Emits `ProxyCreation` event on successful proxy creation.

## Events

### `ProxyCreation`
```solidity
event ProxyCreation(SafeProxy indexed proxy, address singleton);
```
Emitted when a new proxy contract is successfully created.

---

## Reference

- [SafeProxy.sol](https://github.com/safe-global/safe-smart-account/blob/release/v1.4.1/contracts/proxies/SafeProxy.sol)
- [SafeProxyFactory.sol](https://github.com/safe-global/safe-smart-account/blob/release/v1.4.1/contracts/proxies/SafeProxyFactory.sol)
- [IProxyCreationCallback](https://github.com/safe-global/safe-smart-account/blob/release/v1.4.1/contracts/proxies/IProxyCreationCallback.sol)
