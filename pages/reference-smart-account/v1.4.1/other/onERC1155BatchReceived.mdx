import { Tabs, Callout } from 'nextra/components'

import LegacyCallout from '../../../../components/callouts/LegacyCallout.mdx'
import OnlySafeTxCallout from '../../../../components/callouts/OnlySafeTxCallout.mdx'
import ReentrancyCallout from '../../../../components/callouts/ReentrancyCallout.mdx'
import IrreversibilityCallout from '../../../../components/callouts/IrreversibilityCallout.mdx'



# `onERC1155BatchReceived` (0xbc197c81)



Handle the receipt of multiple ERC1155 token types.

An ERC1155-compliant smart contract MUST call this function on the token recipient contract, at the end of a `safeBatchTransferFrom` after the balances have been updated.
This function MUST return `bytes4(keccak256("onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)"))` (i.e. 0xbc197c81) if it accepts the transfer(s).
This function MUST revert if it rejects the transfer(s).
Return of any other value than the prescribed keccak256 generated value MUST result in the transaction being reverted by the caller.




Defined in [` ERC1155TokenReceiver.sol`](https://github.com/safe-global/safe-smart-account/tree/v1.4.1/contracts/interfaces/ERC1155TokenReceiver.sol#L40)


## Usage

{/* <!-- vale off --> */}

<Tabs items={['example.sol']}>
  <Tabs.Tab>
    ```solidity
    interface ISafe {
        function onERC1155BatchReceived(address _operator,address _from,uint256[] calldata _ids,uint256[] calldata _values,bytes calldata _data) external returns (bytes4)
    }

    contract Example {
        function example() ... {
            (ISafe safe).onERC1155BatchReceived(
                0x...,
                [0]
            );
        }
    }
    ```
  </Tabs.Tab>
</Tabs>

{/* <!-- vale on --> */}

## Returns



  - **Type:** `bytes4`

  `bytes4(keccak256("onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)"))`.




## Parameters

### `_operator`

  - **Type:** `address`

  The address which initiated the batch transfer (i.e. msg.sender).

  ```solidity focus=2
  (ISafe safe).onERC1155BatchReceived(
    0x...,
    [0]
  );
  ```


### `_values`

  - **Type:** `uint256[]`

  An array containing amounts of each token being transferred (order and length must match _ids array).

  ```solidity focus=3
  (ISafe safe).onERC1155BatchReceived(
    0x...,
    [0]
  );
  ```





