import { Steps } from 'nextra/components'

# Deploy a Safe

In this guide, you will learn how to deploy a new Safe using the Protocol Kit. This process includes initializing the Protocol Kit, setting up your Safe configuration, and executing the deployment.

For more detailed information, see the [Protocol Kit Reference](../../../protocol-kit/reference/safe.mdx).

## Prerequisites

- [Node.js and npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm)

## Install dependencies

First, you need to install the Protocol Kit.

{/* <!-- vale off --> */}

<CH.Section>
  <CH.Code style={{ boxShadow: 'none' }}>
    ```bash pnpm
    pnpm add @safe-global/protocol-kit
    ```

    ```bash npm
    npm install @safe-global/protocol-kit
    ```

    ```bash yarn
    yarn add @safe-global/protocol-kit
    ```
  </CH.Code>
</CH.Section>

{/* <!-- vale on --> */}

## Steps

<Steps>

  ### Imports

  Import the `Safe` class from the Protocol Kit.

  {/* <!-- vale off --> */}

  ```typescript
  import Safe from '@safe-global/protocol-kit'
  ```

  {/* <!-- vale on --> */}

  ### Create a signer

  You need a signer to instantiate the Protocol Kit. This example uses a private key to obtain a signer, but other [EIP-1193](https://eips.ethereum.org/EIPS/eip-1193) compatible signers are also supported. For detailed information about signers and providers, please refer to the [Protocol Kit reference](../../reference/safe.mdx#initialization).

  {/* <!-- vale off --> */}

  ```typescript
  const SIGNER_PRIVATE_KEY = // ...
  const RPC_URL = 'https://rpc.ankr.com/eth_sepolia'
  ```

  {/* <!-- vale on --> */}

  ### Initialize the Protocol Kit

  Initialize the Protocol Kit with the `provider`, `signer`, and the `predictedSafe` configuration. The `predictedSafe` property is used to define the desired configuration of the Safe account. You can read more about the avalable options in the [Protocol Kit reference](../../reference/safe.mdx#initialization).

  {/* <!-- vale off --> */}

  ```typescript
  // Define your Safe configuration
  const predictedSafe = {
    safeAccountConfig: {
      owners: ['0xOwner1', '0xOwner2', '0xOwner3'], // In this example, 3 owners
      threshold: 2 // Requires at least 2 signatures to approve a transaction
    }
  }

  // Initialize the Protocol Kit with the predictedSafe
  const protocolKit = await Safe.init({
    provider: RPC_URL,
    signer: SIGNER_PRIVATE_KEY,
    predictedSafe
  })
  ```

  {/* <!-- vale on --> */}

  ### Predict your Safe address

  You can predict your Safe address by using the `getAddress` method in the Protocol Kit.

  {/* <!-- vale off --> */}

  ```typescript
  const safeAddress = await protocolKit.getAddress()
  ```

  {/* <!-- vale on --> */}

  ### Create the deployment transaction

  In this step we are going to create the transaction to deploy a new Safe account.

  {/* <!-- vale off --> */}

  ```typescript
  const deploymentTransaction = await protocolKit.createSafeDeploymentTransaction()
  ```

  {/* <!-- vale on --> */}

  ### Execute the deployment transaction

Once we create the deployment transaction object, we can execute it using the signer you specified earlier or your preferred external Ethereum client.

  {/* <!-- vale off --> */}

  ```typescript
  const client = await protocolKit.getSafeProvider().getExternalSigner()

  const txHash = await client.sendTransaction({
    to: deploymentTransaction.to,
    value: BigInt(deploymentTransaction.value),
    data: deploymentTransaction.data as `0x${string}`,
    chain: sepolia
  })

  const txReceipt = await client.waitForTransactionReceipt({ hash: txHash })
  ```

  {/* <!-- vale on --> */}

  ### Reconnect the Protocol Kit to the newly deployed Safe

Once the deployment transaction has been successfully executed, it's necessary to reconnect your Protocol Kit instance to the address of the newly created Safe using the `connect` Method

  {/* <!-- vale off --> */}

```typescript
// Reconnect to the newly deployed Safe using the protocol-kit
protocolKit = await protocolKit.connect({ safeAddress })

// Confirm the Safe is deployed and fetch properties
console.log("Is Safe deployed:", await protocolKit.isSafeDeployed())
console.log("Safe Address:", await protocolKit.getAddress())
console.log("Safe Owners:", await protocolKit.getOwners())
console.log("Safe Threshold:", await protocolKit.getThreshold())
```

{/* <!-- vale on --> */}

</Steps>


## Recap and further reading

After following this guide, you are able to deploy new Safe accounts with the Protocol Kit.
